# CLAUDE.md - VimMaster Project Configuration

## –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
- **–ü—Ä–æ–µ–∫—Ç**: VimMaster - –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è Telegram –∏–≥—Ä–∞ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è Vim
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: Python, aiogram 3.x, FastAPI, PostgreSQL, Redis, Vue.js
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Microservices (Bot + API + Mini App)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
vim-master/
‚îú‚îÄ‚îÄ app/                    # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py            # FastAPI app + Bot entry point
‚îÇ   ‚îú‚îÄ‚îÄ config/            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ bot/               # Telegram Bot (aiogram)
‚îÇ   ‚îú‚îÄ‚îÄ api/               # FastAPI –¥–ª—è Mini App
‚îÇ   ‚îú‚îÄ‚îÄ core/              # –ë–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∞ (Game Engine, Services)
‚îÇ   ‚îú‚îÄ‚îÄ db/                # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Models, Repositories)
‚îÇ   ‚îú‚îÄ‚îÄ utils/             # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ tests/             # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ docker/                # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ requirements/          # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ scripts/               # –°–ª—É–∂–µ–±–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ frontend/              # Vue.js Mini App (—Å–æ–∑–¥–∞—Å—Ç—Å—è –ø–æ–∑–∂–µ)
‚îú‚îÄ‚îÄ .env.example           # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ pyproject.toml         # Poetry –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ docker-compose.yml     # Docker services
‚îî‚îÄ‚îÄ README.md
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **Python**: 3.11+
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL 15+ –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: Redis 7+ –¥–ª—è —Å–µ—Å—Å–∏–π –∏ –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- **–ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**: uv (–±—ã—Å—Ç—Ä—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤ –Ω–∞ Rust)
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker + Docker Compose

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
uv sync

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
uv run python app/main.py

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
uv run pytest

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
uv run black app/
uv run isort app/
uv run ruff check app/ --fix

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
uv run mypy app/

# –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
uv run alembic upgrade head
```

## MVP —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
1. **Telegram Bot**:
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –°–∏—Å—Ç–µ–º–∞ –∫–æ–º–∞–Ω–¥ (/start, /profile, /quest)
   - –ë–∞–∑–æ–≤—ã–µ –∫–≤–µ—Å—Ç—ã —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –æ—Ç–≤–µ—Ç–æ–≤
   - –°–∏—Å—Ç–µ–º–∞ –æ—á–∫–æ–≤ –∏ —É—Ä–æ–≤–Ω–µ–π

2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**:
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (users)
   - –ì–ª–∞–≤—ã –∫–Ω–∏–≥–∏ (chapters) 
   - –ö–≤–µ—Å—Ç—ã (quests)
   - –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (user_progress)
   - –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è (achievements)

3. **Game Engine**:
   - –í–∞–ª–∏–¥–∞—Ü–∏—è Vim –∫–æ–º–∞–Ω–¥
   - –°–∏—Å—Ç–µ–º–∞ —Å–∫–æ—Ä–∏–Ω–≥–∞
   - –ü—Ä–æ–≥—Ä–µ—Å—Å–∏—è —É—Ä–æ–≤–Ω–µ–π
   - –í—ã–¥–∞—á–∞ –ø–æ–¥—Å–∫–∞–∑–æ–∫

4. **API –¥–ª—è Mini App**:
   - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–æ–≤ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
   - –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## –ü–µ—Ä–≤—ã–µ 5 –∫–≤–µ—Å—Ç–æ–≤ (MVP)
1. **Dot Command** - –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å —Ç–æ—á–µ—á–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π (.)
2. **Basic Motions** - –¥–≤–∏–∂–µ–Ω–∏—è w, b, e
3. **Insert Mode** - –∫–æ–º–∞–Ω–¥—ã –≤—Å—Ç–∞–≤–∫–∏ A, I, o
4. **Visual Selection** - –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏
5. **Search & Replace** - –±–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫ –∏ –∑–∞–º–µ–Ω–∞

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å `.env.example` –≤ `.env`
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL –∏ Redis
- –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker Compose

## –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: Black (88 —Å–∏–º–≤–æ–ª–æ–≤)
- **–ò–º–ø–æ—Ä—Ç—ã**: isort —Å –ø—Ä–æ—Ñ–∏–ª–µ–º black
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: mypy –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: pytest —Å async –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
- **Commits**: Conventional Commits

## CI/CD Pipeline
- **Pre-commit hooks**: black, isort, flake8, mypy
- **Testing**: pytest —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
- **Docker**: –∞–≤—Ç–æ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
- **Deployment**: Docker Compose –¥–ª—è prod/staging

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- [Technical Architecture](docs/architecture.md) - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- [Database Schema](docs/database.md) - —Å—Ö–µ–º–∞ –ë–î
- [Quest System](docs/quests.md) - —Å–∏—Å—Ç–µ–º–∞ –∫–≤–µ—Å—Ç–æ–≤
- [API Documentation](docs/api.md) - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

## TODO –¥–ª—è MVP
- [x] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞
- [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å pyproject.toml —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- [ ] –°–æ–∑–¥–∞—Ç—å Docker Compose –¥–ª—è dev –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–∑–æ–≤—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (settings.py)
- [ ] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–π Telegram –±–æ—Ç
- [ ] –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–µ 5 –∫–≤–µ—Å—Ç–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- [ ] –°–æ–∑–¥–∞—Ç—å API endpoints –¥–ª—è Mini App
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

## –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **–í–°–ï–ì–î–ê** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å type hints
- **–í–°–ï–ì–î–ê** –ø–∏—Å–∞—Ç—å docstrings –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- **–í–°–ï–ì–î–ê** –ø–æ–∫—Ä—ã–≤–∞—Ç—å –Ω–æ–≤—ã–π –∫–æ–¥ —Ç–µ—Å—Ç–∞–º–∏
- **–ù–ò–ö–û–ì–î–ê** –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å secrets –≤ –∫–æ–¥
- **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** —Å–ª–µ–¥–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º —Å–ª–æ—è–º (Repository -> Service -> Handler)

---
**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞**: üöß –í –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (MVP —Ñ–∞–∑–∞)