# План разработки VimMaster

## Статус выполнения ✅

### Фаза 1: Настройка проекта ✅ ЗАВЕРШЕНА
- ✅ Создание структуры проекта с uv
- ✅ Настройка линтеров и форматеров (Ruff)
- ✅ Настройка pre-commit хуков
- ✅ Разделение тестов на unit и integration
- ✅ Настройка GitHub Actions для CI/CD
- ✅ Создание Makefile для удобства разработки

### Фаза 2: База данных и модели 🔄 В РАБОТЕ
- ⏳ **ТЕКУЩАЯ ЗАДАЧА**: Создать схему базы данных PostgreSQL
  - Создать модели SQLAlchemy для:
    - User (пользователи)
    - Quest (квесты)
    - Chapter (главы)
    - UserProgress (прогресс пользователей)
    - Achievement (достижения)
  - Настроить Alembic для миграций
  - Создать CRUD операции
- ⏳ Создать репозитории и сервисы для работы с данными

### Фаза 3: Game Engine 📅 ПЛАНИРУЕТСЯ
- 🎯 Создать систему валидации Vim команд
- 🎯 Реализовать движок квестов
- 🎯 Система скоринга и прогрессии
- 🎯 Система подсказок

### Фаза 4: Контент (Квесты) 📅 ПЛАНИРУЕТСЯ
- 🎯 **СЛЕДУЮЩАЯ ЗАДАЧА**: Разработать первые 5 квестов по Vim командам
  1. **Dot Command** - знакомство с точечной командой (.)
  2. **Basic Motions** - движения w, b, e
  3. **Insert Mode** - команды вставки A, I, o
  4. **Visual Selection** - визуальный режим и операции
  5. **Search & Replace** - базовый поиск и замена

### Фаза 5: API для Mini App 📅 ПЛАНИРУЕТСЯ
- 🎯 Создать JWT аутентификацию через Telegram
- 🎯 API endpoints для квестов
- 🎯 API для прогресса пользователей
- 🎯 Интеграция с Telegram WebApp

### Фаза 6: Frontend (Mini App) 📅 ПЛАНИРУЕТСЯ
- 🎯 Создать Vue.js приложение
- 🎯 Интерфейс для прохождения квестов
- 🎯 Система прогресса и достижений
- 🎯 Интеграция с Telegram WebApp API

### Фаза 7: Админ панель 📅 ПЛАНИРУЕТСЯ
- 🎯 Vue.js админ панель
- 🎯 Управление квестами
- 🎯 Статистика пользователей
- 🎯 Система модерации

---

## Техническая архитектура

### Компоненты системы
```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Telegram Bot  │    │    Mini App     │    │   Admin Panel   │
│    (aiogram)    │    │    (Vue.js)     │    │    (Vue.js)     │
└─────────┬───────┘    └─────────┬───────┘    └─────────┬───────┘
          │                      │                      │
          └──────────────────────┼──────────────────────┘
                                 │
                    ┌─────────────┴───────────┐
                    │      FastAPI Server     │
                    │   (Bot + API + Admin)   │
                    └─────────────┬───────────┘
                                  │
                    ┌─────────────┴───────────┐
                    │     PostgreSQL DB       │
                    │     + Redis Cache       │
                    └─────────────────────────┘
```

### Технологический стек
- **Backend**: Python 3.11+, FastAPI, aiogram 3.x
- **Database**: PostgreSQL 15+ + Redis 7+
- **Frontend**: Vue.js 3 + TypeScript
- **Package Manager**: uv (Rust-based)
- **CI/CD**: GitHub Actions
- **Quality**: Ruff (linter/formatter), MyPy, pytest

### Структура проекта
```
vim-master/
├── app/                    # Backend приложение
│   ├── bot/               # Telegram Bot
│   ├── api/               # FastAPI для Mini App
│   ├── core/              # Game Engine + Services
│   ├── db/                # Database models + repositories
│   └── tests/             # Тесты (unit/integration)
├── frontend/              # Vue.js Mini App
├── admin/                 # Vue.js Admin Panel
├── docker/                # Docker конфигурации
└── .github/workflows/     # CI/CD
```

---

## Следующие шаги

### Немедленно (сегодня)
1. 📋 Создать модели базы данных (User, Quest, Chapter, UserProgress, Achievement)
2. 📋 Настроить Alembic для миграций
3. 📋 Исправить падающие интеграционные тесты

### На этой неделе
1. 🎮 Создать Game Engine для валидации Vim команд
2. 📝 Написать первые 5 квестов
3. 🔧 Создать CRUD операции и сервисы

### В ближайший месяц
1. 🌐 Создать API для Mini App
2. 🎨 Разработать Vue.js Mini App
3. ⚙️ Создать админ панель
4. 🚀 Подготовить к деплою

---

## Критерии готовности MVP
- [ ] Telegram Bot с регистрацией и базовым функционалом
- [ ] 5 рабочих квестов по Vim
- [ ] Mini App с интерфейсом для квестов
- [ ] Система прогресса и достижений
- [ ] Админ панель для управления контентом
- [ ] CI/CD и автоматическое тестирование
- [ ] Документация для пользователей и разработчиков

**Цель MVP**: Полнофункциональная образовательная игра для изучения Vim с 5 квестами, готовая к публикации в Telegram.
